{"version":3,"sources":["contexts/GlobalContext.js","components/Web3Connection.js","components/DatePicker.js","components/MakeTimeCapsule.js","helpers/DateHelper.js","components/OpenCapsule.js","components/CheckTimeCapsule.js","App.js","reportWebVitals.js","index.js"],"names":["Reducer","state","action","type","provider","payload","contract","ipfs","error","GlobalContext","createContext","contractABI","require","abi","Web3Connection","useContext","dispatch","browserWalletConnect","a","window","ethereum","enable","web3provider","ethers","providers","Web3Provider","getNetwork","chainId","getSigner","signer","Contract","alert","w","onClick","DatePicker","selectedDate","onChange","isClearable","showPopperArrow","props","selected","MakeTimeCapsule","useState","message","setMessage","Date","dueDate","setDueDate","submitting","setSubmitting","makeTimeCapsule","blob","Blob","strEncodeUTF16","buffer","add","ipfsHash","path","registerTimeCapsule","BigNumber","from","Math","floor","getTime","wait","then","receipt","str","buf","ArrayBuffer","length","bufView","Uint16Array","i","strLen","charCodeAt","h","value","e","target","placeholder","size","resize","py","pl","date","back","pb","change","toMonth","m","OpenCapsule","connecting","setConnecting","fee","setFee","newdate","setNewdate","useEffect","opencapsule","tokenURI","token","id","uri","fetch","data","arrayBuffer","String","fromCharCode","apply","changeDueDate","getAddress","resetDueDate","calculateFee","calculateResetFee","inGwei","my","isReadOnly","getMonth","getDate","getFullYear","mb","precision","CheckTimeCapsule","tokenlist","setTokenlist","open","setOpen","address","newtokenlist","loop","tokenOfOwnerByIndex","tokenId","toNumber","creationDate","push","getTimeCapsuleList","map","key","App","useReducer","checkTC","setCheckTC","makeTC","setMakeTC","Ipfs","create","relay","enabled","hop","active","repo","setUpIpfs","Provider","fontWeight","fontSize","style","textAlign","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"i25DAEaA,EAAU,SAACC,EAAOC,GAC7B,OAAQA,EAAOC,MACb,IAAK,WACH,kCACKF,GADL,IAEEG,SAAUF,EAAOG,UAErB,IAAK,eACH,kCACKJ,GADL,IAEEK,SAAUJ,EAAOG,UAErB,IAAK,WACH,kCACKJ,GADL,IAEEM,KAAML,EAAOG,UAEjB,IAAK,YACH,kCACKJ,GADL,IAEEO,MAAON,EAAOG,UAElB,QACE,OAAOJ,IAIAQ,EAAgBC,0B,gBCnBvBC,EAAcC,EAAQ,MAA4BC,IAoCzCC,EAlCM,WAAK,IAAD,EACGC,qBAAWN,GADd,mBACTO,GADS,WAGjBC,EAAoB,uCAAG,gCAAAC,EAAA,mEAEtBC,OAAOC,SAFe,gCAEGD,OAAOC,SAASC,SAFnB,cAGnBC,EAAe,IAAIC,IAAOC,UAAUC,aAAaN,OAAOC,UAHrC,SAIFE,EAAaI,aAJX,UAKZ,KALY,OAIyBC,QAJzB,wBAOvBX,EAAS,CAACb,KAAM,WAAYE,QAASiB,IAPd,UAUJA,EAAaM,YAVT,QAUnBC,EAVmB,OAWnBvB,EAAW,IAAIiB,IAAOO,SAjBV,6CAiBoCnB,EAAakB,GACjEb,EAAS,CAACb,KAAM,eAAgBE,QAASC,IAZlB,wBAcvBa,OAAOY,MAAM,mFAdU,0DAiBzBf,EAAS,CAACb,KAAM,YAAaE,QAAS,gCACtCc,OAAOY,MAAM,qBAlBY,0DAAH,qDAsB1B,OACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAQC,EAAE,QAAQC,QAAShB,EAA3B,kC,qCCRSiB,G,gBAlBI,SAAC,GAMwB,IAL1CC,EAKyC,EALzCA,aACAC,EAIyC,EAJzCA,SAIyC,IAHzCC,mBAGyC,aAFzCC,uBAEyC,SADtCC,EACsC,2EACzC,OACE,cAAC,IAAD,aACEC,SAAUL,EACVC,SAAUA,EACVC,YAAaA,EACbC,gBAAiBA,GACbC,MC2DKE,EAxEO,SAACF,GAAS,IAAD,EACHxB,qBAAWN,GADR,mBACtBR,EADsB,KACfe,EADe,OAEC0B,mBAAS,IAFV,mBAEtBC,EAFsB,KAEbC,EAFa,OAGCF,mBAAS,IAAIG,MAHd,mBAGtBC,EAHsB,KAGbC,EAHa,OAIOL,mBAAS,GAJhB,mBAItBM,EAJsB,KAIVC,EAJU,KAMvBC,EAAe,uCAAG,8BAAAhC,EAAA,6DACtB+B,EAAc,GADQ,SAGhBE,EAAO,IAAIC,KAAK,CAACC,EAAeV,GAASW,SAHzB,SAIErD,EAAMM,KAAKgD,IAAIJ,EAAK,IAJtB,cAIhBK,EAJgB,OAI2BC,KAJ3B,SAKbxD,EAAMK,SAASoD,oBACpBnC,IAAOoC,UAAUC,KAAKC,KAAKC,MAAMhB,EAAQiB,UAAU,MACnDP,GAPkB,cAQfQ,OAAOC,KARQ,+BAAA/C,EAAA,MAQH,WAAMgD,GAAN,SAAAhD,EAAA,sDACb+B,EAAc,GADD,2CARG,yGAYpB9B,OAAOY,MAAM,KAAIY,SACA,8DAAd,KAAIA,QACLxB,OAAOY,MAAM,2BAERf,EAAS,CAACb,KAAK,YAAaE,QAAQ,EAAD,KAhBtB,0DAAH,qDAoBfgD,EAAe,SAACc,GAGpB,IAFA,IAAIC,EAAM,IAAIC,YAAuB,EAAXF,EAAIG,QAC1BC,EAAU,IAAIC,YAAYJ,GACrBK,EAAE,EAAGC,EAAOP,EAAIG,OAAQG,EAAIC,EAAQD,IAC3CF,EAAQE,GAAKN,EAAIQ,WAAWF,GAE9B,OAAOF,GAGT,OACE,cAAC,IAAD,CAAKvC,EAAE,QAAP,SACgB,IAAbgB,EAAiB,eAAC,IAAD,WACd,cAAC,IAAD,4BACA,cAAC,IAAD,mGAEW,IAAbA,EACA,eAAC,IAAD,WACE,cAAC,IAAD,CACE4B,EAAE,QACFC,MAAOlC,EACPP,SAAU,SAAC0C,GAAKlC,EAAWkC,EAAEC,OAAOF,QACpCG,YAAY,wBACZC,KAAK,KACLC,OAAO,aAET,eAAC,IAAD,CAAQC,GAAI,EAAZ,UACE,cAAC,IAAD,CAAKC,GAAI,EAAT,8BACA,cAAC,EAAD,CAAY5C,SAAUM,EAASV,SAAU,SAACiD,GAAD,OAAQtC,EAAWsC,MAC5D,cAAC,IAAD,CAAKD,GAAI,IAAT,SACE,cAAC,IAAD,CAAQnD,QAASiB,EAAjB,yBAKJ,cAAC,IAAD,CAAQjB,QAASM,EAAM+C,KAAvB,qBAEW,IAAbtC,EACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAKuC,GAAI,EAAT,uBACA,cAAC,IAAD,CAAQtD,QAASM,EAAMiD,OAAvB,yCAEF,cAAC,IAAD,oC,UChFKC,EAAQ,SAACC,GACpB,OAAO,IAAJA,EAAc,UACL,IAAJA,EAAc,WACV,IAAJA,EAAc,QACV,IAAJA,EAAc,QACV,IAAJA,EAAc,MACV,IAAJA,EAAc,OACV,IAAJA,EAAc,OACV,IAAJA,EAAc,SACV,IAAJA,EAAc,YACV,IAAJA,EAAc,UACV,KAAJA,EAAe,WACX,KAAJA,EAAe,WACX,SC6GCC,EAzGG,SAACpD,GAAS,IAAD,EACAxB,qBAAWN,GADX,mBAClBR,EADkB,KACZe,EADY,OAEW0B,oBAAS,GAFpB,mBAElBkD,EAFkB,KAENC,EAFM,OAGKnD,qBAHL,mBAGlBC,EAHkB,KAGTC,EAHS,OAIHF,mBAAS,GAJN,mBAIlBoD,EAJkB,KAIbC,EAJa,OAKKrD,mBAAS,IAAIG,MALlB,mBAKlBmD,EALkB,KAKTC,EALS,KAOzBC,qBAAU,WACRC,MACC,IAEH,IAAMA,EAAW,uCAAC,kCAAAjF,EAAA,+EAGFjB,EAAMK,SAAS8F,SAAS7D,EAAM8D,MAAMC,IAHlC,cAGdC,EAHc,gBAIGC,MAAM,wBAAD,OAAyBD,IAJjC,cAIVE,EAJU,gBAKGA,EAAKtD,OALR,cAKVA,EALU,iBAMUA,EAAKuD,cANf,QAMVA,EANU,OAOd9D,EAAW+D,OAAOC,aAAaC,MAAM,KAAM,IAAIrC,YAAYkC,KAP7C,kDASd1F,EAAS,CAACb,KAAM,YAAaE,QAAQ,EAAD,KATtB,QAWhBwF,GAAc,GAXE,0DAAD,qDAcXiB,EAAa,uCAAC,sBAAA5F,EAAA,6DAClB2E,GAAc,GADI,SAES5F,EAAMG,SAASwB,YAFxB,8BAEqCmF,aAFrC,uCAIT9G,EAAMK,SAAS0G,aACpBzE,EAAM8D,MAAMC,GACZ/E,IAAOoC,UAAUC,KAAKC,KAAKC,MAAMkC,EAAQjC,UAAU,MACnDxC,IAAOoC,UAAUC,KAAKkC,GACtB,CAACjB,MAAOtD,IAAOoC,UAAUC,KAAKkC,KARhB,cASb9B,OAAOC,MAAK,SAACC,GACdiC,OAVc,kDAaC,8DAAd,KAAIxD,QACLxB,OAAOY,MAAM,2BAGbZ,OAAOY,MAAM,mIAEf8D,GAAc,GAnBE,0DAAD,qDAuBboB,EAAY,uCAAC,4BAAA/F,EAAA,sEACGjB,EAAMK,SAAS4G,kBACjC3E,EAAM8D,MAAMC,GACZ/E,IAAOoC,UAAUC,KAAKC,KAAKC,MAAMkC,EAAQjC,UAAU,OAHpC,OACboD,EADa,OAKjBpB,EAAOoB,GALU,2CAAD,qDAQlB,OACE,eAAC,IAAD,WACIvB,EAuCA,cAAC,IAAD,UACE,cAAC,IAAD,CAAKwB,GAAI,EAAT,6BAvCFzE,EACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAKX,EAAE,QAAQoF,GAAI,EAAnB,SACE,cAAC,IAAD,CACExC,EAAE,QACFC,MAAOlC,EACPsC,KAAK,KACLC,OAAO,WACPmC,YAAU,QAGhB,eAAC,IAAD,WACE,eAAC,IAAD,qDAEG5B,EAAQlD,EAAM8D,MAAMvD,QAAQwE,YAF/B,OAGG/E,EAAM8D,MAAMvD,QAAQyE,UAHvB,QAIGhF,EAAM8D,MAAMvD,QAAQ0E,cAJvB,OAMA,cAAC,IAAD,CAAKxF,EAAE,QAAQyF,GAAI,EAAnB,4EACA,eAAC,IAAD,WACE,cAAC,IAAD,6BACA,cAAC,IAAD,CAAKzF,EAAE,SACP,cAAC,EAAD,CAAYQ,SAAUwD,EAAS5D,SAAU,SAACiD,GAAD,OAAQY,EAAWZ,SAE9D,cAAC,IAAD,CAAKT,EAAE,QACP,eAAC,IAAD,WACE,cAAC,IAAD,oBACA,cAAC,IAAD,CAAK5C,EAAE,SACP,cAAC,IAAD,CAAa6C,MAAOiB,EAAI,KAAM4B,UAAW,EAAzC,SACE,cAAC,IAAD,SAGJ,eAAC,IAAD,CAAQN,GAAI,EAAZ,UACE,cAAC,IAAD,CAAQnF,QAAS6E,EAAjB,6BACA,cAAC,IAAD,CAAK9E,EAAE,UACP,cAAC,IAAD,CAAQC,QAASgF,EAAjB,iCAMR,cAAC,IAAD,CAAQhF,QAASM,EAAM+C,KAAvB,sBCrDSqC,EApDQ,SAACpF,GAAS,IAAD,EACLxB,qBAAWN,GADN,mBACvBR,EADuB,aAEIyC,mBAAS,KAFb,mBAEvBkF,EAFuB,KAEZC,EAFY,OAGMnF,oBAAS,GAHf,mBAGvBkD,EAHuB,KAGXC,EAHW,OAINnD,qBAJM,mBAIvBoF,EAJuB,KAIjBC,EAJiB,KA6B9B,OAvBA7B,qBAAU,YACgB,uCAAC,wCAAAhF,EAAA,sEACIjB,EAAMG,SAASwB,YADnB,8BACgCmF,aADhC,OACnBiB,EADmB,OAEvBnC,GAAc,GACRoC,EAAa,GACfC,GAAO,EACHzD,EAAE,EALa,WAKXyD,EALW,4CAOEjI,EAAMK,SAAS6H,oBAAoBH,EAASvD,GAP9C,eAOf2D,EAPe,OAOkDC,WAPlD,KAQDxF,KARC,UAQW5C,EAAMK,SAASwC,QAAQsF,GARlC,2BAQ4CC,WAR5C,KAQuD,IARvD,KAQfvF,EARe,oBASID,KATJ,UASgB5C,EAAMK,SAASgI,aAAaF,GAT5C,oBASsDC,WATtD,KASiE,IATjE,KASfC,EATe,eAUnBL,EAAaM,KAAK,CAACjC,GAAI8B,EAAStF,QAASA,EAASwF,aAAcA,IAV7C,mDAYnBJ,GAAO,EAZY,QAKNzD,IALM,uBAevBoD,EAAaI,GACbpC,GAAc,GAhBS,2DAAD,qDAmBxB2C,KACC,IAGDV,EAAM,cAAC,EAAD,CAAazB,MAAOyB,EAAMxC,KAAM,kBAAIyC,GAAQ,MAChD,eAAC,IAAD,WACE,cAAC,IAAD,CAAKX,GAAI,EAAT,SACKxB,EAAW,cAAC,IAAD,4BACS,IAAnBgC,EAAUtD,OACR,eAAC,IAAD,WACE,cAAC,IAAD,CAAK8C,GAAI,EAAT,uCACA,cAAC,IAAD,CAAQnF,QAASM,EAAMiD,OAAvB,oCAEF,cAAC,IAAD,UACGoC,EAAUa,KAAI,SAACpC,EAAOqC,GACrB,OAAO,eAAC,IAAD,CAAQ1G,EAAE,QAAQC,QAAS,kBAAI8F,EAAQ1B,IAAvC,kBACCZ,EAAQY,EAAMiC,aAAahB,YAD5B,IAC0CjB,EAAMiC,aAAaf,UAD7D,KAC0ElB,EAAMiC,aAAad,wBAKhH,cAAC,IAAD,CAAQvF,QAASM,EAAM+C,KAAvB,sBCqBOqD,MA9Df,WACE,IADa,EAGaC,qBAAW5I,EAFhB,IADR,mBAGNC,EAHM,KAGCe,EAHD,OAIiB0B,oBAAS,GAJ1B,mBAINmG,EAJM,KAIGC,EAJH,OAKepG,oBAAS,GALxB,mBAKNqG,EALM,KAKEC,EALF,KAuBb,OAhBA9C,qBAAU,YACO,uCAAC,4BAAAhF,EAAA,+EAEK+H,IAAKC,OAAO,CAC3BC,MAAO,CAACC,SAAS,EAAMC,IAAK,CAACD,SAAS,EAAME,QAAQ,IACpDC,KAAM,YAJI,OAERhJ,EAFQ,OAMZS,EAAS,CAACb,KAAK,WAAYE,QAASE,IANxB,gDAQZY,OAAOY,MAAM,KAAIY,SARL,yDAAD,qDAYf6G,KACA,IAGA,cAAC/I,EAAcgJ,SAAf,CAAwB5E,MAAO,CAAC5E,EAAMe,GAAtC,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAQ4D,EAAE,OAAV,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAK8E,WAAW,OAAOC,SAAS,OAAhC,mCACA,cAAC,IAAD,CAAKvE,GAAI,IAAT,mCAGF,cAAC,IAAD,IACF,cAAC,IAAD,CAAQR,EAAE,OAAV,SACE,cAAC,IAAD,CAAQgF,MAAO,CAACC,UAAW,SAAUH,WAAY,QAAjD,SACCzJ,EAAMG,SACJyI,GAAUE,EASVF,IAAUE,EACT,cAAC,EAAD,CACEzD,KAAM,WAAKwD,GAAW,IACtBtD,OAAQ,WAAKsD,GAAW,GAAQE,GAAU,MAC7CD,IAASF,EACR,cAAC,EAAD,CACEvD,KAAM,WAAK0D,GAAU,IACrBxD,OAAQ,WAAKwD,GAAU,GAAQF,GAAW,MAC7C,0DAhBC,eAAC,IAAD,WACE,cAAC,IAAD,CAAQ1B,GAAI,EAAGnF,QAAS,WAAK6G,GAAW,IAAxC,sCAGA,cAAC,IAAD,CAAQ1B,GAAI,EAAGnF,QAAS,WAAK+G,GAAU,IAAvC,wCAaJ,cAAC,EAAD,cC5DGc,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,+BAAqB/F,MAAK,YAAkD,IAA/CgG,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,K","file":"static/js/main.211da928.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nexport const Reducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_WEB3':\n      return{\n        ...state,\n        provider: action.payload\n      };\n    case 'SET_CONTRACT':\n      return{\n        ...state,\n        contract: action.payload\n      };\n    case 'SET_IPFS':\n      return{\n        ...state,\n        ipfs: action.payload\n      }\n    case 'SET_ERROR':\n      return{\n        ...state,\n        error: action.payload\n      };\n    default:\n      return state;\n  }\n};\n\nexport const GlobalContext = createContext();","import React, { useContext } from 'react';\nimport {\n  VStack,\n  Button,\n} from '@chakra-ui/react';\nimport {ethers} from 'ethers';\n\nimport { GlobalContext } from '../contexts/GlobalContext';\n\nconst contractAddress = '0x2c9369549FE07499994E2Faa1C4eb33dd954E357';\nconst contractABI = require('../abis/TimeCapsule.json').abi;\n\nconst Web3Connection=()=>{\n  const [state, dispatch] = useContext(GlobalContext);\n\n  const browserWalletConnect = async () => {\n    try{\n      if(window.ethereum) { await window.ethereum.enable() }\n      const web3provider = new ethers.providers.Web3Provider(window.ethereum);\n      const chainId = (await web3provider.getNetwork()).chainId;\n      if(chainId===42){\n        //set provider\n        dispatch({type: 'SET_WEB3', payload: web3provider});\n\n        //set instance\n        let signer = await web3provider.getSigner();\n        let contract = new ethers.Contract(contractAddress, contractABI, signer);\n        dispatch({type: 'SET_CONTRACT', payload: contract});\n      } else {\n        window.alert('Not Using Kovan. Please reconnect using a wallet connected to the Kovan network');\n      }\n    } catch(err){\n      dispatch({type: 'SET_ERROR', payload: 'Connection to Wallet Failed'});\n      window.alert('Connection Failed');\n    }\n  }\n\n  return(\n    <VStack>\n      <Button w='200px' onClick={browserWalletConnect}>\n        Connect to Wallet\n      </Button>\n    </VStack>\n  )\n}\n\nexport default Web3Connection;","import React, { HTMLAttributes } from 'react';\nimport ReactDatePicker from 'react-datepicker';\n\nimport '../styles/react-datepicker.css';\nimport '../styles/date-picker.css';\n\ninterface Props {\n  isClearable?: boolean;\n  onChange: (date: Date) => any;\n  selectedDate: Date | undefined;\n  showPopperArrow?: boolean;\n}\n\nconst DatePicker = ({\n  selectedDate,\n  onChange,\n  isClearable = false,\n  showPopperArrow = false,\n  ...props\n}: Props & HTMLAttributes<HTMLElement>) => {\n  return (\n    <ReactDatePicker\n      selected={selectedDate}\n      onChange={onChange}\n      isClearable={isClearable}\n      showPopperArrow={showPopperArrow}\n      {...props}\n    />\n  );\n};\n\nexport default DatePicker;","import React, { useContext, useState } from 'react';\nimport {\n  Box,\n  VStack,\n  HStack,\n  Button,\n  Textarea,\n} from '@chakra-ui/react';\nimport {ethers} from 'ethers';\n\nimport { GlobalContext } from '../contexts/GlobalContext';\nimport DatePicker from '../components/DatePicker'\n\nconst MakeTimeCapsule=(props)=>{\n  const [state, dispatch] = useContext(GlobalContext);\n  const [message, setMessage] = useState('');\n  const [dueDate, setDueDate] = useState(new Date());\n  const [submitting, setSubmitting] = useState(0);\n\n  const makeTimeCapsule = async() => {\n    setSubmitting(1);\n    try{\n      let blob = new Blob([strEncodeUTF16(message).buffer])\n      let ipfsHash = (await state.ipfs.add(blob,{})).path;\n      (await state.contract.registerTimeCapsule(\n        ethers.BigNumber.from(Math.floor(dueDate.getTime()/1000)),\n        ipfsHash\n        )).wait().then(async(receipt)=>{\n          setSubmitting(2);\n        });\n    }catch(err){\n      window.alert(err.message);\n      if(err.message==='MetaMask Tx Signature: User denied transaction signature.'){\n        window.alert('User denied transaction');\n      }\n      else { dispatch({type:'SET_ERROR', payload: err}); }\n    }\n  }\n\n  const strEncodeUTF16=(str)=>{\n    var buf = new ArrayBuffer(str.length*2);\n    var bufView = new Uint16Array(buf);\n    for (var i=0, strLen=str.length; i < strLen; i++) {\n      bufView[i] = str.charCodeAt(i);\n    }\n    return bufView;\n  }\n\n  return(\n    <Box w='800px'>\n      {submitting===1 ? <VStack>\n          <Box>Submitting...</Box>\n          <Box>If this takes longer than usual, comeback after the transaction has been finished</Box>\n        </VStack>\n      : submitting===0 ? \n        <Box>\n          <Textarea\n            h='300px'\n            value={message}\n            onChange={(e)=>{setMessage(e.target.value)}}\n            placeholder='Write to your future!'\n            size='sm'\n            resize='vertical'\n          />\n          <HStack py={2}>\n            <Box pl={5}>Select Duedate: </Box>\n            <DatePicker selected={dueDate} onChange={(date)=>setDueDate(date)}/>\n            <Box pl={300}>\n              <Button onClick={makeTimeCapsule}>\n                Submit\n              </Button>\n            </Box>\n          </HStack>\n          <Button onClick={props.back}>Back</Button>\n        </Box>\n      : submitting===2 ?\n        <VStack>\n          <Box pb={5}>Submitted</Box>\n          <Button onClick={props.change}>Check your Time Capsules</Button>\n        </VStack>\n      : <Box>Something is Wrong</Box>}\n    </Box> \n  )\n}\n\nexport default MakeTimeCapsule;","export const toMonth=(m)=>{\n  if(m===0) return 'January'\n  else if(m===1) return 'February'\n  else if(m===2) return 'March'\n  else if(m===3) return 'April'\n  else if(m===4) return 'May'\n  else if(m===5) return 'June'\n  else if(m===6) return 'July'\n  else if(m===7) return 'August'\n  else if(m===8) return 'September'\n  else if(m===9) return 'October'\n  else if(m===10) return 'November'\n  else if(m===11) return 'December'\n  else return 'Error'\n}","import React, { useContext, useState, useEffect } from 'react';\nimport {\n  Box,\n  Container,\n  VStack,\n  HStack,\n  Button,\n  Textarea,\n  NumberInput,\n  NumberInputField,\n} from '@chakra-ui/react';\nimport {ethers} from 'ethers';\n\nimport { GlobalContext } from '../contexts/GlobalContext';\nimport DatePicker from './DatePicker';\nimport { toMonth } from '../helpers/DateHelper';\n\nconst OpenCapsule=(props)=>{\n  const [state,dispatch] = useContext(GlobalContext);\n  const [connecting, setConnecting] = useState(true);\n  const [message, setMessage] = useState();\n  const [fee, setFee] = useState(0);\n  const [newdate, setNewdate] = useState(new Date());\n\n  useEffect(() => {\n    opencapsule();\n  }, [])\n\n  const opencapsule=async()=>{\n    let uri;\n    try{\n      uri = await state.contract.tokenURI(props.token.id);\n      let data = await fetch(`https://ipfs.io/ipfs/${uri}`);\n      let blob = await data.blob();\n      let arrayBuffer = await blob.arrayBuffer();\n      setMessage(String.fromCharCode.apply(null, new Uint16Array(arrayBuffer)));\n    }catch(err){\n      dispatch({type: 'SET_ERROR', payload: err})\n    }\n    setConnecting(false);\n  };\n\n  const changeDueDate=async()=>{\n    setConnecting(true);\n    let address = await (await state.provider.getSigner()).getAddress();\n    try{\n      (await state.contract.resetDueDate(\n        props.token.id,\n        ethers.BigNumber.from(Math.floor(newdate.getTime()/1000)),\n        ethers.BigNumber.from(fee),\n        {value: ethers.BigNumber.from(fee)}\n      )).wait().then((receipt)=>{\n        opencapsule();\n      });\n    }catch(err){\n      if(err.message==='MetaMask Tx Signature: User denied transaction signature.'){\n        window.alert('User denied transaction');\n      }\n      else{\n        window.alert('Your fee is too low!!! Use calculate fee to see how much you need to pay in order to move up the due date to what was selected.');\n      }\n      setConnecting(false);\n    }\n  }\n\n  const calculateFee=async()=>{\n    let inGwei = (await state.contract.calculateResetFee(\n      props.token.id,\n      ethers.BigNumber.from(Math.floor(newdate.getTime()/1000))\n    ));\n    setFee(inGwei);\n  }\n\n  return(\n    <Box>\n      {!connecting\n      ? message\n        ? <Box>\n            <Box w=\"800px\" my={5}>\n              <Textarea            \n                h='300px'\n                value={message}\n                size='sm'\n                resize='vertical'\n                isReadOnly/>\n            </Box>\n          </Box>\n        : <Box>\n            <Box>\n              This capsule cannot be opened until&nbsp;\n              {toMonth(props.token.dueDate.getMonth())}&nbsp;\n              {props.token.dueDate.getDate()},&nbsp;\n              {props.token.dueDate.getFullYear()}.\n            </Box>\n            <Box w=\"400px\" mb={4}>But you can move up or push back the due date by paying a fee.</Box>\n            <HStack>\n              <Box>New due date: </Box>\n              <Box w=\"20px\"></Box>\n              <DatePicker selected={newdate} onChange={(date)=>setNewdate(date)}/>\n            </HStack>\n            <Box h=\"4px\"></Box>\n            <HStack>\n              <Box>Fee: </Box>\n              <Box w=\"90px\"></Box>\n              <NumberInput value={fee/1e18} precision={7}>\n                <NumberInputField />\n              </NumberInput>\n            </HStack>\n            <HStack my={5}>\n              <Button onClick={changeDueDate}>Change Due Date</Button>\n              <Box w=\"100px\"></Box>\n              <Button onClick={calculateFee}>Calculate Fee</Button>\n            </HStack>\n          </Box>\n      : <Box>\n          <Box my={5}>Connecting...</Box>\n        </Box>}\n      <Button onClick={props.back}>Back</Button>\n    </Box>\n  )\n}\n\nexport default OpenCapsule;","import React, { useContext, useState, useEffect } from 'react';\nimport {\n  Box,\n  VStack,\n  Button,\n} from '@chakra-ui/react';\nimport {ethers} from 'ethers';\n\nimport { GlobalContext } from '../contexts/GlobalContext';\nimport OpenCapsule from './OpenCapsule';\nimport { toMonth } from '../helpers/DateHelper';\n\nconst CheckTimeCapsule=(props)=>{\n  const [state,dispatch] = useContext(GlobalContext);\n  const [tokenlist, setTokenlist] = useState([]);\n  const [connecting, setConnecting] = useState(false);\n  const [open, setOpen] = useState();\n\n  useEffect(() => {\n    const getTimeCapsuleList=async()=>{\n      let address = await (await state.provider.getSigner()).getAddress();\n      setConnecting(true);\n      const newtokenlist=[];\n      var loop = true;\n      for(var i=0;loop;i++){\n        try{\n          let tokenId = (await state.contract.tokenOfOwnerByIndex(address, i)).toNumber();\n          let dueDate = new Date((await state.contract.dueDate(tokenId)).toNumber()*1000);\n          let creationDate = new Date((await state.contract.creationDate(tokenId)).toNumber()*1000);\n          newtokenlist.push({id: tokenId, dueDate: dueDate, creationDate: creationDate});\n        }catch(err){\n          loop = false;\n        }\n      }\n      setTokenlist(newtokenlist);\n      setConnecting(false);\n    };\n\n    getTimeCapsuleList();\n  }, [])\n\n  return(\n    open? <OpenCapsule token={open} back={()=>setOpen(false)}/>\n    : <Box>\n        <Box my={5}>\n            {connecting?<Box>Connecting...</Box>\n            : tokenlist.length===0\n              ? <VStack>\n                  <Box my={3}>You have no Time Capsules</Box>\n                  <Button onClick={props.change}>Make a Time Capsule</Button>\n                </VStack>\n              : <VStack>\n                  {tokenlist.map((token, key)=>{\n                    return <Button w=\"250px\" onClick={()=>setOpen(token)}>\n                      from {toMonth(token.creationDate.getMonth())} {token.creationDate.getDate()}, {token.creationDate.getFullYear()}\n                    </Button>\n                  })}\n                </VStack>}\n        </Box>\n        <Button onClick={props.back}>Back</Button>\n      </Box>\n  );\n}\n\nexport default CheckTimeCapsule;","import React, { useReducer, useState, useEffect } from 'react';\nimport {\n  Box,\n  ChakraProvider,\n  Center,\n  VStack,\n  Button,\n  Divider,\n} from '@chakra-ui/react';\nimport {ethers} from 'ethers';\nimport Ipfs from 'ipfs';\n\nimport { Reducer, GlobalContext } from \"./contexts/GlobalContext\";\nimport Web3Connection from \"./components/Web3Connection\";\nimport MakeTimeCapsule from \"./components/MakeTimeCapsule\";\nimport CheckTimeCapsule from \"./components/CheckTimeCapsule\";\nimport DatePicker from 'react-datepicker';\n\nfunction App() {\n  const initialState = {\n  };\n  const [state, dispatch] = useReducer(Reducer, initialState);\n  const [checkTC, setCheckTC] = useState(false);\n  const [makeTC, setMakeTC] = useState(false);\n\n  useEffect(()=>{\n    const setUpIpfs=async()=>{\n      try{\n        let ipfs = await Ipfs.create({\n          relay: {enabled: true, hop: {enabled: true, active: true}},\n          repo: \"ipfs-cp\"\n          });\n        dispatch({type:'SET_IPFS', payload: ipfs});\n      }catch(err){\n        window.alert(err.message);\n      }\n    };\n\n    setUpIpfs();\n  },[]);\n\n  return (\n    <GlobalContext.Provider value={[state,dispatch]}>\n      <ChakraProvider>\n        <Center h=\"15vh\">\n          <VStack>\n            <Box fontWeight='bold' fontSize='30px'>Ethereum Time Capsule</Box>\n            <Box pl={400}>powered by Kovan</Box>\n          </VStack>\n        </Center>\n          <Divider/>\n        <Center h=\"60vh\">\n          <VStack style={{textAlign: 'center', fontWeight: 'bold',}}>\n          {state.provider?\n            !checkTC&&!makeTC ? \n              <VStack>\n                <Button my={5} onClick={()=>{setCheckTC(true)}}>\n                  Check your Time Capsules\n                </Button>\n                <Button my={5} onClick={()=>{setMakeTC(true)}}>\n                  Make a new Time Capsule\n                </Button>\n              </VStack>\n            :checkTC&&!makeTC ?\n              <CheckTimeCapsule\n                back={()=>{setCheckTC(false)}} \n                change={()=>{setCheckTC(false); setMakeTC(true)}}/>\n            :makeTC&&!checkTC ?\n              <MakeTimeCapsule\n                back={()=>{setMakeTC(false)}} \n                change={()=>{setMakeTC(false); setCheckTC(true)}}/>\n            :<p>Give it a few miliseconds</p>\n          : <Web3Connection/>}\n          </VStack>\n        </Center>\n      </ChakraProvider>\n    </GlobalContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}